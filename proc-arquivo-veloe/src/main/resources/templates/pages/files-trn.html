<!DOCTYPE html>
<html lang="pr-br"
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org">
    
<head th:replace="fragments/header :: header"></head>

<body><div th:insert="fragments/header :: menu"></div></body>
<div class="container">

<div ng-app="app">
  <div ng-controller="UploadController as vm">
    <div class="container">
      <div class="page-header">
        <h1>Veloe - Processamento de arquivo TRN</h1>
        <h6>Serviço de captura do arquivo TRN para validação e detalhe do layout.</h6>
      </div>

      <!-- <div class="alert alert-info">
        Selecione o arquivo TRN
      </div> -->

			<p th:text="${message}" th:if="${message ne null}" class="alert alert-primary"></p>
			<p th:text="${messageWarning}" th:if="${messageWarning ne null}" class="alert alert-warning"></p>
			<p th:text="${messageError}" th:if="${messageError ne null}" class="alert alert-danger"></p>
                <form method="post" th:action="@{/files-TRN/upload}" enctype="multipart/form-data">
                    <div class="form-group">
                        <input type="file" name="file" class="form-control-file">
                    </div>
                    <button type="submit" class="btn btn-primary">Upload File</button>
                </form>
                <br/>
	   	<div class="table-responsive">
			<table class="table table-sm table-bordered table-striped">
			 <caption>Lista de arquivos</caption>
      			<thead class="bg-primary">
      				<tr>
      					<th scope="col" class="text-center text-white">#</th>
      					<th scope="col" class="text-center text-white">Tipo</th>
      					<th scope="col" class="text-center text-white">Concessionária</th>
      					<th scope="col" class="text-center text-white">Geração</th>
      					<th scope="col" class="text-center text-white">Total Registros</th>
      					<th scope="col" class="text-center text-white">Valor Total</th>
      					<th scope="col" class="text-center text-white">Ações</th>
      				</tr>
      			</thead>
     			<tbody>
 					<tr th:each="file : ${files}">
	   					<td class="text-center" th:text="${file.id}"></td>
	   					<td class="text-center" th:text="${file.tipo}"></td>
	   					<td class="text-center" th:text="${file.idConcessionaria}"></td>
	   					<td class="text-center" th:text="${file.dataGeracao} + ' ' + ${file.horaGeracao}"></td>
	   					<td class="text-center" th:text="${file.totalRegistro}"></td>
	   					<td class="text-right" th:text="|R$ ${{file.valorTotal}}|"></td>
	   					<td class="text-center align-baseline">
	   						<a class="btn btn-link">
	   							<span class="glyphicon glyphicon-search"></span>
	   						</a>
	   					</td>
	   				</tr>
	   				<tr>
	   					<td colspan="7" class="text-center" th:if="${#lists.isEmpty(files)}">Nenhum arquivo foi encontrado</td>
	   				</tr>
      			</tbody>
      		</table>
      	</div>
   <div th:include="fragments/footer :: footer"></div> 
</div>
</html>